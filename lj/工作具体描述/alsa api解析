
alsa-devel@alsa-project.org
Discussion:
Newbie: Broken pipe on snd_pcm_start
(too old to reply)
Gregor MÃ¼ckl
2004-11-20 17:33:52 UTC
Permalink
Raw Message
Hi!

In order to familiarize myself with ALSA, I've tried to write a simple program
which attaches to the sound card and outputs a sound buffer read from a file.
However, I've got a couple of problems with it: Although snd_pcm_prepare() is
not reporting any errors, the sound won't play if I write it out using
snd_pcm_writei(). I tried to use snd_pcm_start() but this fails immediately
with a broken pipe error message. Should this actually tell me that a buffer
underrun happened?

I've attached my test program (yes, quite a hack, I know) and don't know why
it isn't working. Can you tell me what I do wrong? Thanks.

Gregor
Clemens Ladisch
2004-11-22 17:34:23 UTC
Permalink
Raw Message
I tried to use snd_pcm_start() but this fails immediately with a
broken pipe error message. Should this actually tell me that a
buffer underrun happened?
Yes, calling snd_pcm_start() on an empty buffer will underrun
immediately.


Although snd_pcm_prepare() is not reporting any errors, the sound
won't play if I write it out using snd_pcm_writei().
Set start_threshold.