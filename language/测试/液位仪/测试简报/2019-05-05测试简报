RS-485组网测试
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
测试连接如下：

modbus_poll
|
+----+----+----+----+----+----+----+----+----+----+----+----+----+----+----+
|    |    |    |    |    |    |    |    |    |    |    |    |    |    |    |
3    4    6    7    9    10   11   12   13   14   15   16   18   19   21   20
|                                                                          |
monitor1                                                                   monitor2


	04-30下午到05-05早上差不多5天的测试时间，在05-04 11:54~19:32之间出现了3次错
误（10号机两次，21号机一次）

10号机错误1：

modbus_poll报
2019-05-04,11:54:20.592,<00000>,1537,2,25690,16123,1,1013,0,17096,0,0
2019-05-04,11:54:21.826,<00000>,1537,2,25690,16123,1,1013,0,17096,0,0
2019-05-04,11:54:23.279,<00000>,Read error: Framing error
2019-05-04,11:54:24.513,<00000>,1537,2,25690,16123,1,1013,0,17096,0,0
2019-05-04,11:54:25.747,<00000>,513,2,25690,16123,1,1013,0,17096,0,0

请求：
0a 04 00 00 00 0a 71 76

响应：
      31 b0 c0 80 02 64 5a 3e fb 00 01 03 f5 00 00 42 c8 00 00 00 00 06 39
0a 04 14 06 01 00 02 64 5a 3e fb 00 01 03 f5 00 00 42 c8 00 00 00 00 06 39(对照行 上一次响应)


10号机错误2：
2019-05-04,17:26:09.901,<00000>,1537,2,14156,16201,1,1010,0,17096,0,0
2019-05-04,17:26:11.151,<00000>,257,2,14156,16201,1,1010,0,17096,0,0
2019-05-04,17:26:13.447,<00000>,Insufficient bytes received
2019-05-04,17:26:14.697,<00000>,1537,2,25690,16123,1,1013,0,17096,0,0
2019-05-04,17:26:15.900,<00000>,513,2,25690,16123,1,1013,0,17096,0,0

请求
0a 04 00 00 00 0a 71 76

响应
0a 04 14 05 01 00 02 c8
0a 04 14 01 01 00 02 37 4c 3f 49 00 01 03 f2 00 00 42 c8 00 00 00 00 c6 cf(对照行 上一次响应)

21号机错误1：
2019-05-04,19:32:31.612,<00000>,129,2,8389,16176,1,1011,0,17096,0,0
2019-05-04,19:32:32.861,<00000>,513,2,14156,16073,1,1014,0,17096,0,0
2019-05-04,19:32:34.283,<00000>,Read error: Framing error（时间多一些）
2019-05-04,19:32:35.517,<00000>,1281,2,14156,16073,1,1014,0,17096,0,0

请求
15 04 00 00 00 0a 73 19

响应
      26 58 30 c0 81 37 4c 3e c9 00 01 03 f6 00 00 42 c8 00 00 00 00 83 80
15 04 14 02 01 00 02 37 4c 3e c9 00 01 03 f6 00 00 42 c8 00 00 00 00 83 80(对照行 上一次响应)

分析：
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
	10号机错误1 丢失两字节，另有4字节乱码；21号机错误1 丢失两字节，另有五字节乱码。
结合串口驱动的报错Framing error(网路上对此串口错误有这样的解释：帧错误 接收到的
停止位为错误的值(L)时称为帧错误(Framing Error),此时将接收到的数据废弃并返回空闲
状态。)，我认为此时RS-485网络上有某些串扰产生导致这样的错误。

	10号机错误2 串口驱动没有报错，是modbus_poll做modbus协议验证时报的错（data长度
不足，因为第三个字节指出后面应该有20字节数据+2字节校验），属于上层错误，看上去像
软件问题。我仔细review了代码，并没有发现问题。晚上也邀请了马彦明参与讨论，暂时没
有结论。

	明天继续与马彦明讨论，如不能形成结论，将向研发经理金炎胜报告申请开会讨论。
